// Language translations
const translations = {
  id: {
    heroTitle: "5 Mobil Paling Ikonik dari Jepang",
    heroDescription: `Website ini dibuat sebagai bentuk apresiasi terhadap lima mobil Jepang
          paling ikonik pilihan pribadi saya. Setiap mobil yang ditampilkan
          punya daya tarik tersendiri baik dari segi desain, sejarah, maupun
          pengaruhnya di dunia otomotif. Kamu bisa menemukan informasi singkat
          yang padat, tayangan video pendukung, serta tautan menuju sumber asli
          sebagai bentuk penghormatan terhadap para pembuat konten dan referensi
          yang digunakan. Meski sederhana, saya berharap website ini bisa
          membawa nuansa nostalgia, menambah wawasan, atau bahkan memperkenalkan
          kembali betapa kerennya mobil-mobil legendaris dari Jepang.`,
    funFact: "Fakta Menarik:",
    videoBy: "Video oleh",
    watchOriginal: "Tonton Video Asli",
    footerTitle: "Iconic Cars Form Japan",
    madeWith: "Made with",
    by: "by",
    backToHome: "Back to Home",
    supra: {
      name: "Toyota Supra MK4",
      description: `Toyota Supra MK4 adalah ikon mobil sport Jepang yang dikenal dengan
            desain aerodinamis, mesin bertenaga turbo, dan performa yang
            eksplosif. Dibalut gaya agresif dengan sentuhan modern, Supra
            menyuguhkan sensasi berkendara yang lincah dan penuh kendali,
            menjadikannya favorit pecinta kecepatan dan modifikasi.`,
      fact: `2JZ-GTE, mesin legendaris Supra, sanggup tembus 1000+ hp dan jadi
              favorit tuner dunia. Dilengkapi teknologi canggih di masanya,
              serta ikonik lewat The Fast and The Furious.`,
    },
    gtr: {
      name: "Nissan GT-R R34",
      description: `Nissan GT-R R34 adalah mobil sport ikonik Jepang dengan desain
            agresif dan teknologi canggih seperti ATTESA AWD dan Super-HICAS.
            Ditenagai mesin RB26DETT twin-turbo yang legendaris, R34 dikenal
            dengan handling presisi dan potensi modifikasi tinggi. Populer di
            dunia motorsport dan pop culture, terutama lewat Fast & Furious dan
            game Gran Turismo.`,
      fact: `GT-R R34 pakai mesin RB26DETT twin-turbo, kuat hingga 1000+ hp.
              Dilengkapi AWD ATTESA & MFD canggih. Ikonik di Fast & Furious,
              tapi dilarang masuk AS selama 25 tahun, bikin makin langka dan
              diburu.`,
    },
    mazda: {
      name: "Mazda RX-7",
      description: `Mazda RX-7 adalah mobil sport ikonik Jepang dengan desain
            aerodinamis dan mesin rotary 13B-REW twin-turbo yang ringan dan
            bertenaga. Terkenal karena handling tajam, bobot ringan, dan
            performa uniknya. RX-7 jadi legenda JDM lewat dunia drift, anime
            Initial D, dan Fast & Furious.`,
      fact: `RX-7 pakai mesin rotary twin-turbo unik dan ringan. Handling
              tajam, bobot seimbang. Ikonik di Initial D & Fast & Furious, jadi
              legenda JDM yang tak terlupakan.`,
    },
    nsx: {
      name: "Honda NSX",
      description: `Honda NSX adalah supercar Jepang bermesin V6 mid-engine yang ringan,
            presisi, dan tangguh. Dikembangkan bersama Ayrton Senna, NSX
            menghadirkan performa tinggi dengan kenyamanan harian. Jadi pionir
            supercar modern, dan tetap ikonik di dunia otomotif hingga sekarang.`,
      fact: `Dibentuk bareng Ayrton Senna. Sasis aluminium pertama. V6 VTEC mid-engine. Nyaman, tapi buas. Buka era baru supercar dunia.`,
    },
    silvia: {
      name: "Nissan Silvia S15",
      description: `Nissan Silvia S15 adalah coupe JDM legendaris dengan desain tajam
            dan mesin SR20DET turbo yang responsif. Ringan, rear-wheel drive,
            dan mudah dimodifikasi, Silvia jadi favorit di dunia drift dan
            motorsport. Ikonik lewat Initial D dan budaya street racing.`,
      fact: `SR20DET turbo, ringan dan lincah. RWD sejati, raja drifting. Ikonik dan langka di luar Jepang.`,
    },
  },
  en: {
    heroTitle: "Top 5 Most Iconic Cars from Japan",
    heroDescription: `This website was created as a form of appreciation for the five most iconic Japanese cars, my personal choice. Each car featured has its own appeal in terms of design, history, and influence in the automotive world. You can find concise, concise information, supporting video clips, and links to original sources as a form of respect for the content creators and references used. Although simple, I hope this website can bring a nostalgic feel, add insight, or even reintroduce how cool legendary Japanese cars are.`,
    funFact: "Fun Fact:",
    videoBy: "Video by",
    watchOriginal: "Watch Original Video",
    footerTitle: "Iconic Cars Form Japan",
    madeWith: "Made with",
    by: "by",
    backToHome: "Back to Home",
    supra: {
      name: "Toyota Supra MK4",
      description: `The Toyota Supra MK4 is a Japanese sports car icon known for its aerodynamic design, turbocharged engine, and explosive performance. Wrapped in aggressive styling with a modern twist, the Supra delivers a nimble and controlled driving experience, making it a favorite among speed and modification enthusiasts.`,
      fact: `2JZ-GTE, the legendary Supra engine, capable of reaching 1000+ hp and becoming a favorite of world tuners. Equipped with advanced technology for its time, and iconic through The Fast and The Furious.`,
    },
    gtr: {
      name: "Nissan GT-R R34",
      description: `The Nissan GT-R R34 is an iconic Japanese sports car with an aggressive design and advanced technologies such as ATTESA AWD and Super-HICAS. Powered by the legendary RB26DETT twin-turbo engine, the R34 is known for its precise handling and high modification potential. It is popular in motorsport and pop culture, especially through the Fast & Furious and Gran Turismo games.`,
      fact: `GT-R R34 uses RB26DETT twin-turbo engine, powerful up to 1000+ hp.
             Equipped with advanced ATTESA AWD & MFD. Iconic in Fast & Furious,
             but banned from entering the US for 25 years, making it increasingly rare and
             hunted.`,
    },
    mazda: {
      name: "Mazda RX-7",
      description: `The Mazda RX-7 is an iconic Japanese sports car with an aerodynamic design and a lightweight and powerful 13B-REW twin-turbo rotary engine. It is renowned for its sharp handling, light weight, and unique performance. The RX-7 has become a JDM legend through the world of drifting, anime Initial D, and Fast & Furious.`,
      fact: `The RX-7 uses a unique and lightweight twin-turbo rotary engine. Sharp handling, balanced weight. Iconic in Initial D & Fast & Furious, an unforgettable JDM legend.`,
    },
    nsx: {
      name: "Honda NSX",
      description: `The Honda NSX is a lightweight, precise, and powerful mid-engine V6 Japanese supercar. Developed with Ayrton Senna, the NSX delivers high performance with everyday comfort. It pioneered the modern supercar, and remains iconic in the automotive world today.`,
      fact: `Built with Ayrton Senna. First aluminium chassis. Mid-engine V6 VTEC. Comfortable, yet ferocious. Opening a new era for the world's supercars.`,
    },
    silvia: {
      name: "Nissan Silvia S15",
      description: `The Nissan Silvia S15 is a legendary JDM coupe with sharp styling and a responsive SR20DET turbo engine. Lightweight, rear-wheel drive, and easy to modify, the Silvia is a favorite in the world of drift and motorsport. Iconic through Initial D and street racing culture.`,
      fact: `SR20DET turbo, light and agile. True RWD, the king of drifting. Iconic and rare outside of Japan.`,
    },
  },
  ja: {
    heroTitle: "日本の象徴的な車トップ5",
    heroDescription: `このウェブサイトは、私が個人的に選んだ、最も象徴的な日本車5台への感謝の気持ちを形にするために作成されました。紹介されている車はどれも、デザイン、歴史、そして自動車界への影響において、それぞれ独自の魅力を持っています。コンテンツ制作者や参考文献への敬意を表し、簡潔で分かりやすい情報、補足となる動画クリップ、そしてオリジナルソースへのリンクを掲載しています。シンプルなウェブサイトですが、懐かしい気持ちや洞察を深め、伝説的な日本車の魅力を再認識していただければ幸いです。`,
    funFact: "面白い事実:",
    videoBy: "ビデオ",
    watchOriginal: "オリジナルビデオを見る",
    footerTitle: "Iconic Cars Form Japan",
    madeWith: "Made with",
    by: "by",
    backToHome: "Back to Home",
    supra: {
      name: "Toyota Supra MK4",
      description: `トヨタ・スープラMK4は、空力特性、ターボチャージャー付きエンジン、そして爆発的なパフォーマンスで知られる、日本のスポーツカーの象徴です。モダンなひねりを加えたアグレッシブなスタイリングを纏ったスープラは、俊敏でコントロールされたドライビングエクスペリエンスを提供し、スピードと改造を愛する人々に愛されています。`,
      fact: `2JZ-GTEは、1000馬力以上を発生し、世界中のチューナーに愛された伝説のスープラエンジンです。当時としては先進的な技術を搭載し、『ワイルド・スピード』シリーズでも象徴的な存在でした。`,
    },
    gtr: {
      name: "Nissan GT-R R34",
      description: `日産GT-R R34は、アグレッシブなデザインとATTESA AWD、Super-HICASといった先進技術を備えた、日本を代表するスポーツカーです。伝説のRB26DETTツインターボエンジンを搭載したR34は、精確なハンドリングと高い改造ポテンシャルで知られています。モータースポーツやポップカルチャー、特に『ワイルド・スピード』や『グランツーリスモ』といったゲームを通して人気を博しています。`,
      fact: `GT-R R34は、1000馬力を超えるパワフルなRB26DETTツインターボエンジンを搭載しています。
             先進のATTESA AWD & MFDを搭載。映画『ワイルド・スピード』の象徴的な一台ですが、
             25年間アメリカへの輸入が禁止されていたため、ますます希少となり、
             探し求める人が増えています。`,
    },
    mazda: {
      name: "Mazda RX-7",
      description: `マツダRX-7は、空力特性に優れたデザインと軽量でパワフルな13B-REW型ツインターボロータリーエンジンを搭載した、日本を代表するスポーツカーです。シャープなハンドリング、軽量、そして比類なきパフォーマンスで高い評価を得ています。RX-7は、ドリフトの世界、アニメ『頭文字D』、そして『ワイルド・スピード』といった作品を通して、JDMの伝説となっています。`,
      fact: `RX-7は、独自の軽量ツインターボロータリーエンジンを搭載。シャープなハンドリングとバランスの取れた重量バランスを実現。映画『頭文字D』や『ワイルド・スピード』シリーズで象徴的な存在となり、JDMの伝説として忘れられない存在となりました。`,
    },
    nsx: {
      name: "Honda NSX",
      description: `ホンダNSXは、軽量で精密、そしてパワフルなV6ミッドシップエンジンを搭載した日本製スーパーカーです。アイルトン・セナと共同開発されたNSXは、高いパフォーマンスと日常の快適性を兼ね備えています。現代のスーパーカーの先駆けであり、今もなお自動車界の象徴的な存在です。`,
      fact: `アイルトン・セナと共に製作。初のアルミシャーシ。ミッドシップV6 VTEC。快適でありながら、力強い走り。世界のスーパーカーに新たな時代を切り開く。`,
    },
    silvia: {
      name: "Nissan Silvia S15",
      description: `日産シルビアS15は、シャープなスタイリングとレスポンスに優れたSR20DETターボエンジンを搭載した、伝説的なJDMクーペです。軽量、後輪駆動、そして改造の容易さから、シルビアはドリフトやモータースポーツの世界で人気を博しています。映画『頭文字D』やストリートレースカルチャーの象徴的な存在です。`,
      fact: `SR20DETターボ、軽快で俊敏。真のRWD、ドリフトの王者。日本国外では稀少でありながら象徴的な存在。`,
    },
  },
  vi: {
    heroTitle: "Top 5 mẫu xe mang tính biểu tượng nhất của Nhật Bản",
    heroDescription: `Trang web này được tạo ra như một hình thức tri ân năm chiếc xe Nhật Bản mang tính biểu tượng nhất, theo lựa chọn cá nhân của tôi. Mỗi chiếc xe được giới thiệu đều có sức hấp dẫn riêng về mặt thiết kế, lịch sử và ảnh hưởng trong thế giới ô tô. Bạn có thể tìm thấy thông tin súc tích, ngắn gọn, các đoạn video clip hỗ trợ và liên kết đến các nguồn gốc như một hình thức tôn trọng người sáng tạo nội dung và các tài liệu tham khảo được sử dụng. Mặc dù đơn giản, tôi hy vọng trang web này có thể mang lại cảm giác hoài cổ, thêm hiểu biết sâu sắc hoặc thậm chí giới thiệu lại những chiếc xe Nhật Bản huyền thoại tuyệt vời như thế nào.`,
    funFact: "Sự Thật Thú Vị:",
    videoBy: "Video bởi",
    watchOriginal: "Xem Video Gốc",
    footerTitle: "Iconic Cars Form Japan",
    madeWith: "Made with",
    by: "by",
    backToHome: "Back to home",
    supra: {
      name: "Toyota Supra MK4",
      description: `Toyota Supra MK4 là biểu tượng xe thể thao Nhật Bản nổi tiếng với thiết kế khí động học, động cơ tăng áp và hiệu suất bùng nổ. Được bao bọc trong phong cách mạnh mẽ với nét hiện đại, Supra mang đến trải nghiệm lái xe nhanh nhẹn và được kiểm soát, khiến nó trở thành mẫu xe được ưa chuộng trong số những người đam mê tốc độ và độ xe.`,
      fact: `2JZ-GTE, động cơ Supra huyền thoại, có khả năng đạt công suất 1000+ mã lực và trở thành động cơ được các tay độ xe trên thế giới ưa chuộng. Được trang bị công nghệ tiên tiến vào thời điểm đó và mang tính biểu tượng qua The Fast and The Furious.`,
    },
    gtr: {
      name: "Nissan GT-R R34",
      description: `Nissan GT-R R34 là một chiếc xe thể thao mang tính biểu tượng của Nhật Bản với thiết kế mạnh mẽ và các công nghệ tiên tiến như ATTESA AWD và Super-HICAS. Được trang bị động cơ tăng áp kép RB26DETT huyền thoại, R34 được biết đến với khả năng xử lý chính xác và tiềm năng cải tiến cao. Nó phổ biến trong thể thao mô tô và văn hóa đại chúng, đặc biệt là thông qua các trò chơi Fast & Furious và Gran Turismo.`,
      fact: `GT-R R34 sử dụng động cơ tăng áp kép RB26DETT, công suất lên đến hơn 1000 mã lực.
             Được trang bị hệ dẫn động bốn bánh toàn thời gian ATTESA & MFD tiên tiến. Biểu tượng trong Fast & Furious,
             nhưng bị cấm nhập cảnh vào Hoa Kỳ trong 25 năm, khiến nó ngày càng hiếm và
             bị săn lùng.`,
    },
    mazda: {
      name: "Mazda RX-7",
      description: `Mazda RX-7 là một chiếc xe thể thao mang tính biểu tượng của Nhật Bản với thiết kế khí động học và động cơ quay tăng áp kép 13B-REW nhẹ và mạnh mẽ. Nó nổi tiếng với khả năng xử lý sắc nét, trọng lượng nhẹ và hiệu suất độc đáo. RX-7 đã trở thành huyền thoại của JDM trong thế giới drift, anime Initial D và Fast & Furious.`,
      fact: `RX-7 sử dụng động cơ quay tăng áp kép độc đáo và nhẹ. Xử lý sắc nét, trọng lượng cân bằng. Biểu tượng trong Initial D & Fast & Furious, một huyền thoại JDM khó quên.`,
    },
    nsx: {
      name: "Honda NSX",
      description: `Honda NSX là siêu xe Nhật Bản động cơ V6 đặt giữa nhẹ, chính xác và mạnh mẽ. Được phát triển cùng Ayrton Senna, NSX mang lại hiệu suất cao với sự thoải mái hàng ngày. Nó tiên phong trong siêu xe hiện đại và vẫn là biểu tượng trong thế giới ô tô ngày nay.`,
      fact: `Được xây dựng với Ayrton Senna. Khung gầm nhôm đầu tiên. Động cơ V6 VTEC đặt giữa. Thoải mái nhưng hung dữ. Mở ra kỷ nguyên mới cho siêu xe thế giới.`,
    },
    silvia: {
      name: "Nissan Silvia S15",
      description: `Nissan Silvia S15 là một chiếc coupe JDM huyền thoại với kiểu dáng sắc sảo và động cơ tăng áp SR20DET phản ứng nhanh. Nhẹ, dẫn động cầu sau và dễ sửa đổi, Silvia là mẫu xe được ưa chuộng trong thế giới drift và đua xe thể thao. Mang tính biểu tượng qua văn hóa đua xe đường phố và Initial D.`,
      fact: `SR20DET turbo, nhẹ và nhanh nhẹn. RWD đích thực, vua của drift. Biểu tượng và hiếm có bên ngoài Nhật Bản.`,
    },
  },
};

// Current language
let currentLang = "id";

// Initialize the website
document.addEventListener("DOMContentLoaded", function () {
  initializeLanguage();
  initializeVideoObserver();
  initializeCardAnimations();
  initializeLanguageButtons();
});

// Language functions
function initializeLanguage() {
  const savedLang = localStorage.getItem("preferredLanguage") || "id";
  changeLanguage(savedLang);
}

function changeLanguage(lang) {
  currentLang = lang;
  localStorage.setItem("preferredLanguage", lang);

  // Update all translatable elements
  const elements = document.querySelectorAll("[data-translate]");
  elements.forEach((element) => {
    const key = element.getAttribute("data-translate");
    const translation = getNestedTranslation(translations[lang], key);
    if (translation) {
      if (key === "heroTitle") {
        // Special handling for hero title with word animation
        const words = translation.split(" ");
        element.innerHTML = words
          .map((word) => `<span class="title-word">${word}</span>`)
          .join(" ");
      } else {
        element.textContent = translation;
      }
    }
  });

  // Update active language button
  document.querySelectorAll(".lang-btn").forEach((btn) => {
    btn.classList.remove("active");
  });
  document.querySelector(`[data-lang="${lang}"]`).classList.add("active");

  // Update document language
  document.documentElement.lang = lang;
}

function getNestedTranslation(obj, key) {
  return key.split(".").reduce((o, k) => (o || {})[k], obj);
}

function initializeLanguageButtons() {
  document.querySelectorAll(".lang-btn").forEach((btn) => {
    btn.addEventListener("click", () => {
      const lang = btn.getAttribute("data-lang");
      changeLanguage(lang);
    });
  });
}

// Video intersection observer
function initializeVideoObserver() {
  const videos = document.querySelectorAll("video");
  const videoObserver = new IntersectionObserver(
    (entries) => {
      entries.forEach((entry) => {
        const video = entry.target;
        if (entry.isIntersecting) {
          video.play().catch((e) => console.log("Video play failed:", e));
        } else {
          video.pause();
        }
      });
    },
    {
      threshold: 0.5,
      rootMargin: "0px 0px -100px 0px",
    }
  );

  videos.forEach((video) => {
    videoObserver.observe(video);

    // Set volume to audible (not muted)
    video.muted = false;
    video.volume = 0.3; // Set to 30% volume

    // Add click to toggle play/pause
    video.addEventListener("click", () => {
      if (video.paused) {
        video.play();
      } else {
        video.pause();
      }
    });

    // Add loading and error handling
    video.addEventListener("loadstart", () => {
      console.log("Video loading started");
    });

    video.addEventListener("error", (e) => {
      console.log("Video error:", e);
    });
  });
}

// Card animations
function initializeCardAnimations() {
  const cards = document.querySelectorAll(".car-card");
  const cardObserver = new IntersectionObserver(
    (entries) => {
      entries.forEach((entry) => {
        if (entry.isIntersecting) {
          const index = entry.target.getAttribute("data-index");
          setTimeout(() => {
            entry.target.classList.add("animate-in");
          }, index * 150); // Stagger animation
        }
      });
    },
    {
      threshold: 0.15,
      rootMargin: "0px 0px -50px 0px",
    }
  );

  cards.forEach((card) => cardObserver.observe(card));
}

// Smooth scroll to top
function scrollToTop() {
  window.scrollTo({
    top: 0,
    behavior: "smooth",
  });
}

// Add some interactive effects
document.addEventListener("DOMContentLoaded", function () {
  // Add parallax effect to hero background
  window.addEventListener("scroll", () => {
    const scrolled = window.pageYOffset;
    const heroBackground = document.querySelector(".hero-background-animation");
    if (heroBackground) {
      heroBackground.style.transform = `translateY(${scrolled * 0.5}px)`;
    }
  });

  // Add hover sound effect (optional)
  document
    .querySelectorAll(".video-link, .back-home-btn, .lang-btn")
    .forEach((btn) => {
      btn.addEventListener("mouseenter", () => {
        // You can add a subtle hover sound here if needed
        btn.style.transform = "translateY(-2px)";
      });

      btn.addEventListener("mouseleave", () => {
        btn.style.transform = "translateY(0)";
      });
    });
});

// Add keyboard navigation
document.addEventListener("keydown", (e) => {
  switch (e.key) {
    case "Home":
      scrollToTop();
      break;
    case "1":
    case "2":
    case "3":
    case "4":
    case "5":
      const langButtons = document.querySelectorAll(".lang-btn");
      if (langButtons[parseInt(e.key) - 1]) {
        langButtons[parseInt(e.key) - 1].click();
      }
      break;
  }
});

// Performance optimization: Lazy load videos
function initializeLazyLoading() {
  const videos = document.querySelectorAll("video");
  const videoObserver = new IntersectionObserver((entries) => {
    entries.forEach((entry) => {
      if (entry.isIntersecting) {
        const video = entry.target;
        if (!video.src && video.dataset.src) {
          video.src = video.dataset.src;
          video.load();
        }
      }
    });
  });

  videos.forEach((video) => videoObserver.observe(video));
}

// Console Easter Egg
console.log(`
🚗 Welcome to Iconic Japanese Cars Showcase! 🇯🇵
════════════════════════════════════════════════

Thanks for checking out the console!
This website celebrates the legendary JDM culture.

Keyboard shortcuts:
• Home key: Scroll to top
• 1-4 keys: Switch languages
• Click videos to play/pause

Made with ❤️ by SakhaYassaar
`);
